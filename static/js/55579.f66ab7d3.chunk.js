"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[55579],{550679:(e,t,a)=>{a.r(t),a.d(t,{DataProvider:()=>r.DataProvider,LayoutProvider:()=>r.LayoutProvider,default:()=>r.RecyclerListView});var r=a(653094)},55579:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var r=a(256666),n=a(539144),o=a(208593),l=a(877531),u=a(719392),i=a(196234),s=a(311631),d=a(202784),c=a(472719),f=a(795116),h=a(268883),m=a(552322);const p=function(){var e=(0,c.useNavigation)(),t=(0,s.useSafeAreaInsets)().top,a=(0,c.useRoute)().params,r=a.requestId,n=a.onSuccess,p=a.onCancel,x=a.field,g=(0,d.useState)(""),v=(0,i.default)(g,2),j=v[0],b=v[1],y=function(t){var a=t.password;return(0,d.useEffect)((function(){a&&(j||(b(a),setTimeout((function(){n(a,r),e.goBack()}),500)))}),[a]),(0,m.jsx)(f.default,{w:"full",h:"full",children:(0,m.jsx)(u.default,{size:"lg"})})};return(0,m.jsx)(o.default,{style:{zIndex:1e4,top:t},children:(0,m.jsx)(l.default,{footer:null,onModalClose:function(){j||null==p||p()},children:(0,m.jsx)(h.default,{walletId:null,field:x,children:function(e){return(0,m.jsx)(y,{password:e})}})})})};var x=a(866904),g=a(93586),v=a.n(g),j=a(561220),b=a(18861),y=a(550679),w=a(559656),M=a(624491),P=(0,d.memo)((function(e){var t=e.color,a=e.onPress;return(0,m.jsx)(b.default,{flexDirection:"row",height:"40px",justifyContent:"space-around",px:"24px",marginY:"24px",children:M.colors.map((function(e){var r=t===e;return(0,m.jsx)(j.default,{onPress:function(){a(e)},children:function(t){var a=t.isHovered;return(0,m.jsx)(f.default,{width:"40px",height:"40px",p:"2px",borderRadius:"full",bgColor:r?e:a?"border-hovered":void 0,children:(0,m.jsx)(b.default,{flex:1,alignSelf:"stretch",bgColor:e,borderRadius:"full",borderColor:"background-default",borderWidth:"4px"})})}},`color${e}`)}))})}));P.displayName="ColorSelecter";const _=function(){var e=(0,d.useRef)(),t=(0,c.useNavigation)(),a=(0,c.useRoute)().params,r=a.avatar,n=a.onDone,o=(0,d.useState)(r.bgColor),u=(0,i.default)(o,2),s=u[0],f=u[1],h=(0,d.useState)(r.emoji),p=(0,i.default)(h,2),g=p[0],_=p[1],R=(0,d.useState)(0),C=(0,i.default)(R,2),O=C[0],S=C[1],I=48,k=O-48,W=Math.floor(k/I),A=(0,d.useMemo)((function(){var e=v()(M.emojiList,W);return new y.DataProvider((function(e,t){return e!==t})).cloneWithRows(e)}),[W]),D=(0,d.useMemo)((function(){return new y.LayoutProvider((function(){return"emoji"}),(function(e,t){t.width=k,t.height=I}))}),[k,I]),L=(0,d.useCallback)((function(e,t){var a=v()(t,W);return(0,m.jsx)(b.default,{height:"full",children:a.map((function(e,t){return(0,m.jsx)(b.default,{flexDirection:"row",justifyContent:"space-between",width:`${k}px`,height:"48px",children:e.map((function(e,a){return(0,m.jsx)(j.default,{onPress:function(){_(e)},borderRadius:"12px",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},children:(0,m.jsx)(b.default,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",children:(0,m.jsx)(x.default,{typography:"DisplayXLarge",children:e})})},`rows${t} ${a}`)}))},`rows${t}`)}))})}),[I,W,k]);return(0,m.jsx)(l.default,{size:"xs",height:"562px",header:"",primaryActionTranslationId:"action__done",hideSecondaryAction:!0,staticChildrenProps:{flex:1},primaryActionProps:{onPress:function(){n&&n({emoji:g,bgColor:s}),t.goBack()}},children:(0,m.jsxs)(b.default,{flex:1,children:[(0,m.jsx)(b.default,{alignItems:"center",children:(0,m.jsx)(w.default,{avatar:{emoji:g,bgColor:s},walletImage:"hd",size:"xl"})}),(0,m.jsx)(P,{color:s,onPress:f}),(0,m.jsx)(b.default,{onLayout:function(e){O!==e.nativeEvent.layout.width&&S(e.nativeEvent.layout.width)},flex:1,ref:e,borderTopLeftRadius:"24px",borderTopRadius:"24px",bgColor:"surface-subdued",children:O>0&&(0,m.jsx)(b.default,{flex:1,children:(0,m.jsx)(y.default,{dataProvider:A,layoutProvider:D,rowRenderer:L,renderAheadOffset:300,renderAheadStep:100,style:{padding:24}})})})]})})};var R=a(783723),C=a(321668),O=a(566147),S=a(480058),I=a(435581),k=a(669083),W=a(634795),A=a(921311),D=a(783112),L=a(945821),z=a(747225),E=a(481047),N=a(821919);const T=function(){var e,t,a,r=(0,D.default)(),n=(0,c.useNavigation)(),o=(0,c.useRoute)().params.walletId,u=L.default.engine,s=L.default.dispatch,h=L.default.serviceCloudBackup,p=L.default.serviceAccount,x=(0,z.useRuntime)().wallets,g=null!=(e=x.find((function(e){return e.id===o})))?e:null,v=(0,d.useState)(!1),y=(0,i.default)(v,2),P=y[0],_=y[1],T=(0,d.useState)(null!=(t=null==g?void 0:g.avatar)?t:M.defaultAvatar),B=(0,i.default)(T,2),V=B[0],$=B[1],q=(0,A.default)({defaultValues:{name:""}}),H=q.control,F=q.handleSubmit,X=q.setError,Y=F(function(){var e=(0,W.default)((function*(e){_(!0);var t,a=""===e.name?null==g?void 0:g.name:e.name;if(x.find((function(e){return e.name===a&&e.name!==(null==g?void 0:g.name)})))return X("name",{message:r.formatMessage({id:"form__account_name_invalid_exists"})}),void _(!1);(yield u.setWalletNameAndAvatar(o,{name:a,avatar:V}))?(h.requestBackup(),yield p.initWallets(),setTimeout((function(){return s((0,N.setRefreshTS)())})),k.default.show({title:r.formatMessage({id:"msg__change_saved"})}),null==(t=n.getParent())||t.goBack()):X("name",{message:r.formatMessage({id:"msg__unknown_error"})});_(!1)}));return function(t){return e.apply(this,arguments)}}()),G=(0,d.useMemo)((function(){return(0,m.jsx)(f.default,{children:(0,m.jsx)(j.default,{onPress:function(){n.navigate(E.RootRoutes.Modal,{screen:E.ModalRoutes.ManagerWallet,params:{screen:E.ManagerWalletModalRoutes.ManagerWalletModifyEmojiModal,params:{avatar:V,onDone:function(e){$((function(){return e}))}}}})},children:function(e){var t=e.isHovered;return(0,m.jsxs)(S.default,{width:"56px",height:"56px",children:[(0,m.jsx)(b.default,{width:"full",height:"full",justifyContent:"center",alignItems:"center",children:(0,m.jsx)(w.default,{avatar:V,walletImage:"hd",size:"xl"})}),(0,m.jsx)(b.default,{size:6,justifyContent:"center",alignItems:"center",borderWidth:2,bg:t?"surface-hovered":"surface-neutral-default",borderColor:"surface-subdued",borderRadius:"full",right:"-12px",bottom:"-12px",children:(0,m.jsx)(I.default,{name:"PencilMini",size:16})})]})}})})}),[V,n]);return(0,m.jsx)(l.default,{header:r.formatMessage({id:"modal__edit_wallet"}),footer:null,children:(0,m.jsxs)(R.default,{px:{base:4,md:0},children:[G,(0,m.jsxs)(O.default,{mt:"6",children:[(0,m.jsx)(O.default.Item,{name:"name",defaultValue:"",control:H,rules:{maxLength:{value:24,message:r.formatMessage({id:"form__account_name_invalid_characters_limit"},{0:"24"})}},children:(0,m.jsx)(O.default.Input,{size:"xl",autoFocus:!0,placeholder:null!=(a=null==g?void 0:g.name)?a:""})}),(0,m.jsx)(C.default,{type:"primary",size:"xl",isLoading:P,runAfterInteractions:!0,onPress:Y,children:r.formatMessage({id:"action__done"})})]})]})})};var B=a(679978);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var $=(0,a(324665).default)(),q=[{name:E.ManagerWalletModalRoutes.ManagerWalletModifyNameModal,component:T},{name:E.ManagerWalletModalRoutes.ManagerWalletAuthorityVerifyModal,component:p},{name:E.ManagerWalletModalRoutes.ManagerWalletModifyEmojiModal,component:_}];const H=function(){var e=(0,n.default)();return(0,m.jsx)($.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({headerShown:!1},(0,B.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:q.map((function(e){return(0,m.jsx)($.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);